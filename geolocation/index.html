
<button id="get">Get Location</button>
<div id="info"></div>
<div id="map"></div>

<script>

    let getLocation = (callback) => {
        console.log('is this being called?')
        if(!navigator.geolocation) {
            $("#info").innerText = "This browser does not support Geolocation"
            return
        }
        navigator.geolocation.getCurrentPosition((location)=>{  // async func - needs a callback
            console.log('location', location)
            callback(location)
        })        
    }

    let $btn = $("#get")
    $btn.addEventListener('click', () => {
        
        getLocation((location) => {
            $("#info").innerHTML = `
                <span>Latitude: ${location.coords.latitude}</span>
                <span>Longitude: ${location.coords.longitude}</span>
            `
            insertScriptFromUrl("https://maps.googleapis.com/maps/api/js?key=AIzaSyBB_pf1WOVGDYQhs8UOvMy1Af9VLl2NGyk&callback=myMap")
        })
    })

    let googleMap = $("#map")

    window.myMap = () => {
        getLocation((location) => {
            let mapProp= {
                center:new google.maps.LatLng(location.coords.latitude,location.coords.longitude),
                zoom:5,
            }
            let map = new google.maps.Map(googleMap, mapProp)

        })
    }


</script>

<!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBB_pf1WOVGDYQhs8UOvMy1Af9VLl2NGyk&callback=myMap"></script> -->
